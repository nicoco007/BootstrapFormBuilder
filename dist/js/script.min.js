"use strict";var BootstrapFormBuilder={init:function(){var t=this;$(".bsfb-form").each(function(){var a=$(this);a.addClass("js"),a.find('[type="submit"]').on("click",function(){$(this).attr("clicked","true")}),a.find("input, textarea").on("change",function(){window.onbeforeunload=function(e){return e.returnValue="no"}}),a.on("submit",function(e){e.preventDefault(),t.form.submit(a)}),a.find(".datetimepicker-date").each(function(){var e=$(this),a=e.attr("id"),t=$('<div class="input-group date" data-target-input="nearest" id="'+a+'-wrapper">');t.append('<div class="input-group-prepend"><button type="button" class="btn btn-primary" data-target="#'+a+'-wrapper" data-toggle="datetimepicker"><i class="fa fa-calendar"></i></button></div>'),e.after(t),e.remove(),t.append(e);var r={format:"L",locale:e.data("locale")||"en"};e.data("min-date")&&(r.minDate=new Date(e.data("min-date"))),e.data("max-date")&&(r.maxDate=new Date(e.data("max-date"))),t.datetimepicker(r)}),a.find("select").each(function(){t.dropdownSelect($(this))}),a.find("[data-parent-value]").each(function(){var a=$(this),t=$('[name="'+a.data("parent")+'"]'),r=a.data("parent-value");t.on("change",function(){var e=t.val();"checkbox"===t.attr("type")?e=t.prop("checked"):"radio"===t.attr("type")&&(e=t.filter(":checked").val()),e===r?a.addClass("visible"):a.removeClass("visible")}).trigger("change")}),a.find('input[type="tel"]').each(function(){var e=$(this),a=["US","CA"];e.data("pref-countries")&&(a=e.data("pref-countries").split(",")),e.intlTelInput({initialCountry:e.data("initial-country")||"US",preferredCountries:a})})})},dropdownSelect:function(t){var e=t.find("option"),a=t.attr("id")||t.attr("name"),r=$('<div class="dropdown bsfb-select">'),n=$('<button class="btn btn-light dropdown-toggle form-control" type="button" id="'+a+'-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-ref="'+a+'">'),i=$('<span class="select-text"></span>'),o=$('<span class="select-text-inner"></span>'),d=$('<div class="dropdown-menu" aria-labelledby="'+a+'-dropdown">');e.each(function(){var e=$(this),a=$('<span class="dropdown-item" data-value="'+e.val()+'">'+e.text()+"</span>");a.on("click",function(){t.val(a.data("value")),o.text(a.text())}),d.append(a)});var s=e.filter('[value="'+t.val()+'"]').first();s.length||(s=e.first()),o.text(s.text()),t.after(r),t.remove(),i.append(o),n.append(i),r.append(n),r.append(d),r.append(t)},form:{submit:function(r){var n=this;r.find("fieldset, button").prop("disabled",!0),r.find("a").addClass("disabled"),r.find(".alert").remove();var e=r.find('button[type="submit"][clicked=true]');e.removeAttr("clicked");var a=e.children().first();a.is("i.fa")&&a.addClass("d-none"),e.prepend('<i class="fa fa-spinner fa-spin loader"></i> ');var t={ajax_submit:!0};t[e.attr("name")]=e.val(),r.find("input, textarea, select, button").each(function(){var e=$(this),a=e.parents(".form-group");e.removeClass("is-invalid"),a.find(".invalid-feedback").remove(),"checkbox"===e.attr("type")?t[e.attr("name")]=e.prop("checked")?"on":null:"radio"===e.attr("type")?e.prop("checked")&&(t[e.attr("name")]=e.val()):t[e.attr("name")]=e.val()}),$.ajax({method:r.attr("method"),contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:t,success:function(e){n.ajax.success(r,e)},error:function(e,a,t){n.ajax.error(r,e,a,t)},complete:function(){n.ajax.complete(r,e)}})},ajax:{success:function(e,a){if(!0===a.received)if(a.controlErrors)for(var t in a.controlErrors){var r=a.controlErrors[t],n=e.find('[name="'+t+'"], [data-ref="'+t+'"]'),i=n.closest(".form-group");n.addClass("is-invalid"),i.find(".input-group, .form-control, .custom-control:last").first().after('<div class="invalid-feedback d-block">'+r+"</div>")}else a.error?a.error.message?e.prepend('<div class="alert alert-danger">'+a.error.message+"</div>"):e.prepend('<div class="alert alert-danger">An unexpected error occured.</div>'):a.response?(e.prepend('<div class="alert alert-'+a.response.class+'">'+a.response.message+"</div>"),a.success&&(window.onbeforeunload=null),a.response.redirect&&(window.location=a.response.redirect)):(e.prepend('<div class="alert alert-success">Form submitted successfully.</div>'),window.onbeforeunload=null);else e.prepend('<div class="alert alert-danger">An unexpected server-side error occured. Please try again later.</div>')},error:function(e,a,t,r){e.prepend('<div class="alert alert-danger">Unable to submit form: '+r+"</div>")},complete:function(e,a){var t;a.find("i.fa.loader").remove(),a.children().first().removeClass("d-none");var r=e.find(".is-invalid:first").parents(".form-group");t=r.length?r.offset().top-10:e.offset().top-50,$("html, body").animate({scrollTop:t},100),e.find("fieldset, button").prop("disabled",!1),e.find("a").removeClass("disabled")}}}};$(function(){BootstrapFormBuilder.init()});
//# sourceMappingURL=script.min.js.map